<body>
    <!-- Parte que possuí apenas o pedido -->
    <div class="open-order" *ngIf="aberto">
        <!-- Parte que possui botão para fechar o "pop-up" -->
        <div class="container-close-order">
            <button class="close-order" (click)="escondePedido()">X</button>
        </div>
        <!-- titulo do pedido seguido de subtitulos: "PRODUTO, R$" -->
        <div class="container-order-title">
            <h1 class="title-order"><b> Seu pedido:</b></h1>
        </div>
        <div class="container-order-subtitles">
            <p class="orange-paragraph"><b>PRODUTO</b> </p>
            <p class="orange-paragraph"><b>R$</b></p>
        </div>
        <!-- Inicia um loop de itens do pedido -->
        <div *ngFor="let item of itensPedido;index as indice" class="container-order-items">
            <!-- Contém cada Item do pedido -->
            <div class="container-order-item">
                <p class="orange-paragraph">{{item.nomeItem}}</p>
                <p class="orange-paragraph">{{item.precoItem}}</p>
            </div>
        </div>
        <!-- Mostra preço do pedido -->
        <p class="order-price"><b> Total:R$ {{calculaPreco(itensPedido)}} </b></p>
        <!-- Cadastra pedido -->
        <div class="container-order-confirm">
            <button *ngIf="itensPedido.length>0" class="btn-pedido cursor-pointer"
                (click)="cadastraPedido()"><b>Confirmar pedido</b></button>
        </div>
    </div>
    <!-- Parte destinada para o cabeçalho desta página -->
    <div class="subheader-page">
        <div class="container-filter-menu">
            <p class="filter-menu">Filtrar por</p>
        </div>
        <!-- Seleção de categoria -->
        <div>
            <select [(ngModel)]="categoriaFiltro" (click)="modoPesquisa=false" class="select cursor-pointer mr-50">
                <option value="Pizzas">Pizzas</option>
                <option value="Lanches">Lanches</option>
                <option value="Massas">Massas</option>
                <option value="Doces">Doces</option>
                <option value="Prato feito">Prato feito</option>
                <option value="Bebidas">Bebidas</option>
                <option value="Tudo" selected>Todos</option>
            </select>
        </div>
        <div class="container-show-order">
            <button *ngIf="usuarioLogadoCliente" class="btn-search cursor-pointer" (click)="mostraPedido()">
                Mostrar Carrinho</button>
        </div>
        <!-- Contém o mecanismo de busca -->
        <div class="container-search-menu">
            <input placeholder="Encontre sua empresa favorita" class="search-input" type="text" [(ngModel)]="pesquisa">
            <button class="btn-search cursor-pointer" (click)="pesquisar()">Pesquisar</button>
        </div>
    </div>
    <!-- Parte em que ficam os cardápios em si -->
    <div class="container-menus" *ngIf="!modoPesquisa">
        <!-- Inicia um loop de cardápios -->
        <div *ngFor="let cardapio of cardapiosLista;index as indice" class="leftMainCardapio">
            <details class="open-menu" *ngIf="escolherLado(indice, cardapio)">
                <summary class="container-menu cursor-pointer">{{cardapio.nomeEmpresa}}</summary>
                <!-- inicia loop de itens no cardápio -->
                <p *ngFor="let item of cardapio.itensCardapio;index as indice;" class="item-menu">{{item.nomeItem}}
                    - R$ {{item.precoItem}}
                    <button class="opt-item cursor-pointer mr-15"
                        (click)="adicionaItens(item, cardapio.nomeEmpresa)">Add</button>
                    <button class="opt-item cursor-pointer" (click)="removeItens(item)">Remove</button>
                </p>
                <p class="container-avaliation-title"><b>Avalie o cardápio:
                    </b> </p>
                <!-- Parte selecionada para avaliar cardápio -->
                <div class="container-avaliation">
                    <select class="selectCardapio cursor-pointer" [(ngModel)]="novaAvaliacaoValor">
                        <option value=1>1</option>
                        <option value=2>2</option>
                        <option value=3>3</option>
                        <option value=4>4</option>
                        <option value=5>5</option>
                    </select>
                    <button class="opt-item cursor-pointer w-150" (click)="avaliar(cardapio)">Enviar
                        avaliação</button>
                </div>
                <p class="average-grade"><b>Nota média:
                        {{cardapio.mediaAvaliacao}}</b></p>
            </details>
            <!-- </div> -->
        </div>
        <div class="rightMainCardapio">
            <!-- inicia loop de cardapios -->
            <div *ngFor="let cardapio of cardapiosLista;index as indice">
                <details class="open-menu" *ngIf="!escolherLado(indice, cardapio)">
                    <summary class="container-menu cursor-pointer">{{cardapio.nomeEmpresa}}</summary>
                    <!-- inicia loop de itens no cardápio -->
                    <p *ngFor="let item of cardapio.itensCardapio;index as indice;" class="item-menu">
                        {{item.nomeItem}}
                        - R$ {{item.precoItem}}
                        <button class="opt-item cursor-pointer mr-15"
                            (click)="adicionaItens(item, cardapio.nomeEmpresa)">Add</button>
                        <button class="opt-item cursor-pointer" (click)="removeItens(item)">Remove</button>
                    </p>
                    <p class="container-avaliation-title"><b>Avalie o cardápio:
                        </b> </p>
                    <!-- Parte selecionada para avaliar cardápio -->
                    <div class="container-avaliation">
                        <select class="selectCardapio cursor-pointer" [(ngModel)]="novaAvaliacaoValor">
                            <option value=1>1</option>
                            <option value=2>2</option>
                            <option value=3>3</option>
                            <option value=4>4</option>
                            <option value=5>5</option>
                        </select>
                        <button class="opt-item cursor-pointer w-150" (click)="avaliar(cardapio)">Enviar
                            avaliação</button>
                    </div>
                    <p class="average-grade"><b>Nota média:
                            {{cardapio.mediaAvaliacao}}</b></p>
                </details>
            </div>
        </div>
    </div>
    <!-- Parte destinada a mostrar empresa por busca -->
    <div *ngIf="modoPesquisa" class="search-mode">
        <!-- inicia loop de cardapios -->
        <div *ngFor="let cardapio of cardapiosLista;index as indice">
            <div *ngIf="cardapio.nomeEmpresa == pesquisa" class="search">
                <details class="open-menu">
                    <summary class="quadradoCardapio cursor-pointer">{{cardapio.nomeEmpresa}}</summary>
                    <!-- inicia loop de itens no cardápio -->
                    <p *ngFor="let item of cardapio.itensCardapio;index as indice;" class="item-menu">
                        {{item.nomeItem}}
                        - R$ {{item.precoItem}}
                        <button class="opt-item cursor-pointer mr-15"
                            (click)="adicionaItens(item, cardapio.nomeEmpresa)">Add</button>
                        <button class="opt-item cursor-pointer" (click)="removeItens(item)">Remove</button>
                    </p>
                    <p class="container-avaliation-title"><b>Avalie o cardápio:</b> </p>
                    <!-- Parte selecionada para avaliar cardápio -->
                    <div class="container-avaliation">
                        <select class="selectCardapio cursor-pointer" [(ngModel)]="novaAvaliacaoValor">
                            <option value=1>1</option>
                            <option value=2>2</option>
                            <option value=3>3</option>
                            <option value=4>4</option>
                            <option value=5>5</option>
                        </select>
                        <button class="opt-item cursor-pointer w-150" (click)="avaliar(cardapio)">Enviar
                            avaliação</button>
                    </div>
                    <p class="average-grade"><b>Nota média:
                            {{cardapio.mediaAvaliacao}}</b></p>
                </details>
            </div>
        </div>
    </div>
</body>